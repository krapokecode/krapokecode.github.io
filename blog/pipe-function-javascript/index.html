<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="lang">
  <head>
    <title data-vue-tag="true">มาลองใช้ pipe แก้ปัญหา function ซ้อนกันไปเรื่อยๆดีกว่า (Javascript) - Lagmanzaza</title><meta data-vue-tag="true" charset="utf-8"/><meta data-vue-tag="true" name="generator" content="Gridsome v0.3.6"/><meta data-vue-tag="true" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/><meta data-vue-tag="true" property="og:description" content="เปิดโลกของ noob web developer" vmid="og:description"/><meta data-vue-tag="true" property="og:image" content="https://scontent.fbkk5-6.fna.fbcdn.net/v/t1.0-9/36398960_2017406161906508_6784979761291591680_o.jpg?_nc_cat=101&amp;_nc_ht=scontent.fbkk5-6.fna&amp;oh=43e080ad8a49c64e0f701c0eba562092&amp;oe=5CA450E1" vmid="og:image"/><meta data-vue-tag="true" property="og:description" content vmid="og:description"/><meta data-vue-tag="true" property="og:image" content="https://storage.googleapis.com/myblog-7f48d.appspot.com/flamelink%2Fmedia%2F1545508060057_1_fBo9NmafWUmFHnQrcR-6tg.jpeg?GoogleAccessId=firebase-adminsdk-gd8gq%40myblog-7f48d.iam.gserviceaccount.com&amp;Expires=16725225600&amp;Signature=Lg2oVGCQa%2BeOdWC5DcodJ%2B1XRTRA3tQMTcAbQqoFhZ%2BoUj0i%2FwD5l28Q3QmQfF1Y2CLppInjsURsRAnKzDCrjB6L%2B3xEbIz03Ib01wLvKg%2BEdJz0JMfy8UtX2OUIwQCflVyaU35pwd8Ie6b9BB17D4BWQsOBP%2BAAoVPjxxrTKNiDhZIWrAPNnIL0GU4S3o%2BOURleGMKWU22EVezOfiH89bxLDKkV9TUx8qsvsNSg%2Fs8JMMjJ5jOBOaGoWhhlexKMlvDPpICPskXromBwcH4u7%2BfHn%2FvJPqHqQnyNVZTdIX99jG8v5odRsi3wZYosyAHOVvTTJ43cE0hIVKImTKYXvQ%3D%3D" vmid="og:image"/><link data-vue-tag="true" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon-w16.3a5b228441cbcf73270ea0c43e6875c4.png"/><link data-vue-tag="true" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon-w32.3a5b228441cbcf73270ea0c43e6875c4.png"/><link data-vue-tag="true" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon-w96.3a5b228441cbcf73270ea0c43e6875c4.png"/><link data-vue-tag="true" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon-w76.3a5b228441cbcf73270ea0c43e6875c4.png"/><link data-vue-tag="true" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon-w152.3a5b228441cbcf73270ea0c43e6875c4.png"/><link data-vue-tag="true" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon-w120.3a5b228441cbcf73270ea0c43e6875c4.png"/><link data-vue-tag="true" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon-w167.3a5b228441cbcf73270ea0c43e6875c4.png"/><link data-vue-tag="true" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon-w180.3a5b228441cbcf73270ea0c43e6875c4.png"/><noscript data-vue-tag="true" ><style>.g-image--loading{display:none;}</style></noscript><link rel="preload" href="/assets/css/styles.f991946a.css" as="style"><link rel="preload" href="/assets/js/app.0540ab33aa31e8e0d9de.js" as="script"><link rel="preload" href="/assets/css/2.styles.cf6f805a.css" as="style"><link rel="preload" href="/assets/js/component--blog.26d03bb3710407adc45b.js" as="script"><link rel="preload" href="/assets/css/styles.f991946a.css" as="style"><link rel="prefetch" href="/assets/js/component--about.fead66b4ce0fd469a2fe.js"><link rel="prefetch" href="/assets/js/component--blogs.472833ac281651b05ece.js"><link rel="prefetch" href="/assets/js/component--home.786790098a33a2165dec.js"><link rel="prefetch" href="/assets/js/page-query.047636d9ff70fb396d72.js"><link rel="stylesheet" href="/assets/css/styles.f991946a.css"><link rel="stylesheet" href="/assets/css/2.styles.cf6f805a.css"><link rel="stylesheet" href="/assets/css/styles.f991946a.css">
  </head>
  <body data-vue-tag="">
    <div data-server-rendered="true" id="app" data-v-6859cd39><div class="layout" data-v-6859cd39><nav class="nav"><a href="/" class="active"><div class="nav-band">Home</div></a><a href="/blogs"><div class="nav-item">Blog</div></a><div class="nav-item">About me</div></nav><img src="https://storage.googleapis.com/myblog-7f48d.appspot.com/flamelink%2Fmedia%2F1545508060057_1_fBo9NmafWUmFHnQrcR-6tg.jpeg?GoogleAccessId=firebase-adminsdk-gd8gq%40myblog-7f48d.iam.gserviceaccount.com&amp;Expires=16725225600&amp;Signature=Lg2oVGCQa%2BeOdWC5DcodJ%2B1XRTRA3tQMTcAbQqoFhZ%2BoUj0i%2FwD5l28Q3QmQfF1Y2CLppInjsURsRAnKzDCrjB6L%2B3xEbIz03Ib01wLvKg%2BEdJz0JMfy8UtX2OUIwQCflVyaU35pwd8Ie6b9BB17D4BWQsOBP%2BAAoVPjxxrTKNiDhZIWrAPNnIL0GU4S3o%2BOURleGMKWU22EVezOfiH89bxLDKkV9TUx8qsvsNSg%2Fs8JMMjJ5jOBOaGoWhhlexKMlvDPpICPskXromBwcH4u7%2BfHn%2FvJPqHqQnyNVZTdIX99jG8v5odRsi3wZYosyAHOVvTTJ43cE0hIVKImTKYXvQ%3D%3D" class="cover" data-v-6859cd39><h1 class="title" data-v-6859cd39>มาลองใช้ pipe แก้ปัญหา function ซ้อนกันไปเรื่อยๆดีกว่า (Javascript)</h1><br data-v-6859cd39><div class="blog-container" data-v-6859cd39><div class="content" data-v-6859cd39><p></p>
<p><span style="font-size: 16px;">สำหรับใครที่เคยใช้เจ้าแพะหรือ ramdaJS มาก่อนคงได้ยินหรือเคยใช้ pipe() มาอยู่แล้ว ซึ่งพี่ pipe() เอาไว้ทำอะไรน่ะเหรอ ดูตัวอย่างเลยครับ</span></p>
<pre><span style="font-size: 16px;">getFirstChar( toLowerCase(data))</span></pre>
<p></p>
<p><span style="font-size: 16px;">ทุกเห็นคงคิดว่าก็ไม่เห็นมีไรเลยซับซ้อนตรงไหนแค่ 2 functions เอง แต่ถ้าสมมุติเป็นแบบนี้ล่ะ</span></p>
<pre><span style="font-size: 16px;">getFirstChar( toLowerCase(convertAsciiToText(getName(data))))</span></pre>
<p></p>
<p></p>
<img src="https://firebasestorage.googleapis.com/v0/b/myblog-7f48d.appspot.com/o/flamelink%2Fmedia%2F1545679658057_1545660065385_holy-shit-what-dc0kau.jpg?alt=media&token=494d24a5-5bba-42fc-a2c0-6fa7b851a73f" alt="" style="float:none;height: auto;width: 80%"/>
<p></p>
<p style="text-align:center;"><span style="font-size: 16px;">เฮ๊~~~~~~ ทุกคนกำลังคิดแบบนี้อยู่แน่ๆ</span></p>
<p><span style="font-size: 16px;">ก่อนที่เราจะมาพูดถึงวิธีการแก้ไขปัญหา เรามาพูดถึงแนวคิดของเจ้า pipe กันก่อน ต้องย้อนกลับไปความรู้ทางคณิตศาสตร์ตอน ม. 5 การเลยคือเรื่อง relation and function ต้องขอบอกก่อนว่าผมก็ไม่เก่งคณิตศาสตร์แต่ผมจะพยายามอธิบายให้ง่ายที่สุดเท่าที่จะทำได้นะครับ</span></p>
<p><span style="font-size: 16px;"><strong>Math #1 basic function</strong></span></p>
<p><span style="font-size: 16px;">สมมุติว่าผมสร้าง function ตัวนึงสำหรับรับค่า x เพื่อนำไปบวก 2</span></p>
<pre><span style="font-size: 16px;">f(x) = x + 2</span></pre>
<p><span style="font-size: 16px;">ทีนี้ผมสร้างอีก function นึงสำหรับรับค่า x แล้วทำไปคูณ 5</span></p>
<pre><span style="font-size: 16px;">g(x) = x * 5</span></pre>
<p><span style="font-size: 16px;">เริ่มจาก function แรกก่อน</span></p>
<pre><span style="font-size: 16px;">f(2) = 2 + 2</span><br><span style="font-size: 16px;">     = 4</span></pre>
<p><span style="font-size: 16px;">ต่อมาตัวก็เป็น function g</span></p>
<pre><span style="font-size: 16px;">g(2) = 2 * 5</span><br><span style="font-size: 16px;">     = 10</span></pre>
<p><span style="font-size: 16px;">นี้ก็เป็นตัวอย่างเล็กๆน้อยจากเรื่อง function สำหรับ ม. 5 ต่อไปมาเริ่มในสิ่งที่ยากขึ้นอีกระดับนึงเรียกว่า composite function เริ่ม!!</span></p>
<p><span style="font-size: 16px;"><strong>Math #2 Composite function</strong></span></p>
<p><span style="font-size: 16px;">ง่ายๆมันคือการรวม function เข้าด้วยกันนั้นเอง ผมขอยก 2 functions ด้านบนมาด้วยนะครับจะได้ไม่เสียเวลา มันก็จะได้แบบนี้</span></p>
<p><span style="font-size: 16px;">อันดับแรกผมเอา 2 function2 นี้รวมกัน</span></p>
<pre><span style="font-size: 16px;">f(g(x))</span></pre>
<p><span style="font-size: 16px;">ผมจะเขียนแนวการคิดไปทีละขั้นตอนเน้อ...</span></p>
<pre><span style="font-size: 16px;">f(g(x)) = f(x * 5)</span><br><span style="font-size: 16px;">        = (x * 5) + 2</span></pre>
<p><span style="font-size: 16px;">ลองมาดูตัวอย่างกัน</span></p>
<pre><span style="font-size: 16px;">f(g(2)) = f(2 * 5)</span><br><span style="font-size: 16px;">        = (2 * 5) + 2</span><br><span style="font-size: 16px;">        = 10 + 2</span><br><span style="font-size: 16px;">        = 12</span></pre>
<p></p>
<p><span style="font-size: 16px;">เอ๊ะแล้วเจ้า pipe() สุดที่รักของเรามันเกี่ยวอะไรกับคณิตศาสตร์ช่วยปวดหัว ผมต้องบอกเลยว่ามันคืออันเดียว ผมจะเปรียบเทียบให้ดู</span></p>
<pre><span style="font-size: 16px;">f(g(x)) = getFirstChar( toLowerCase(data))</span></pre>
<p></p>
<p><span style="font-size: 16px;">เห็นมั๊ยว่าเหมือนกันเป๊ะๆ เรามาดูโค๊ด pipe() กันเลย</span></p>
<pre><span style="font-size: 16px;">const pipe = (...fns) =&gt; x =&gt; fns.reduce((v, f) =&gt; f(v), x)</span></pre>
<p><span style="font-size: 16px;">สำหรับใครที่ไม่รู้จัก </span><a href="https://medium.freecodecamp.org/how-do-javascript-rest-parameters-actually-work-227726e16cc8" target="_self"><span style="font-size: 16px;"><strong>rest parameter</strong></span></a><span style="font-size: 16px;"> กับ </span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_self"><span style="font-size: 16px;"><strong>reduce</strong></span></a><span style="font-size: 16px;">  ตามนี้โล๊ด </span></p>
<p></p>
<p><span style="font-size: 16px;">วิธีการใช้ตัว pipe() ก็ตามนี้เลย</span></p>
<pre><span style="font-size: 16px;">pipe(getFirstChar, toLowerCase, convertAsciiToText, getName)(data)</span></pre>
<p><span style="font-size: 16px;">เห็นมั๊ยว่าสะดวกและอ่านงานกว่าเยอะ ถือว่าเป็นวิธีที่ดีมากๆ</span></p>
<p><span style="font-size: 16px;">เป็นไงบ้างครับ สำหรับอะไรแบบนี้</span></p>
<p></p>
<p></p>
<p><span style="font-size: 16px;">Ref:</span></p>
<p><a href="https://medium.com/front-end-weekly/pipe-and-compose-in-javascript-5b04004ac937" target="_self"><span style="font-size: 16px;">https://medium.com/front-end-weekly/pipe-and-compose-in-javascript-5b04004ac937</span></a>&nbsp;</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters" target="_self"><span style="font-size: 16px;">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters</span></a>&nbsp;</p>
<p></p>
</div></div><footer><p class="footer-text">©Lagmanzaza</p></footer></div></div>
    <script src="/assets/js/app.0540ab33aa31e8e0d9de.js" defer></script><script src="/assets/js/component--blog.26d03bb3710407adc45b.js" defer></script>
  </body>
</html>
